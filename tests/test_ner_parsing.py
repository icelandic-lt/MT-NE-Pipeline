from mt_named_entity.ner import IS_NER


def test_is_find_token_coalesce_and_twice_present():
    sent = "$ 1 Pick Three (7-4-1) greiddi $14,20. Pick Three Pool $12,109. $1 Consolation Pick Three (7-5-1) greiddi $7,10."
    tokens = "$1 Pick Three ( 7-4-1 ) greiddi $14,20 . Pick Three Pool $12,109 . $1 Consolation Pick Three ( 7-5-1 ) greiddi $7,10 .".split(" ")
    labels = "B-Organization B-Organization I-Organization O O O O B-Money O B-Organization I-Organization I-Organization B-Money O B-Organization B-Organization I-Organization I-Organization O O O O B-Money O".split(" ")
    # It should not crash
    tags = IS_NER.parse_ner_tags(sent, tokens, labels)
    assert True

def test_is_find_token_sanity_check():
    sent = "Fyrsta ein milljón notenda sem við fengum kom í raun rétt eftir að búið var að setja greinarnar í gang á WeChat,\" sagði Hsu við CNBC Make It og vísaði þar til svars Kína við smáforritinu WhatsApp sem er í eigu Facebook."
    tokens = "Fyrsta ein milljón notenda sem við fengum kom í raun rétt eftir að búið var að setja greinarnar í gang á WeChat , \" sagði Hsu við CNBC Make It og vísaði þar til svars Kína við smáforritinu WhatsApp sem er í eigu Facebook . \"".split(" ")
    labels = "O O O O O O O O O O O O O O O O O O O O O O B-Miscellaneous O O O B-Person O B-Organization I-Organization I-Organization O O O O O B-Location O O B-Miscellaneous O O O O B-Organization O".split(" ")
    # It should not crash
    tags = IS_NER.parse_ner_tags(sent, tokens, labels)
    assert True

def test_softhyphens():
    sent = "Skilmálar Ísland.is Upplýsingar um persónuvernd og öryggi verða uppfærðar hér samhliða þróun og efnisskrifum á vefnum. Persónuvernd og öryggi Vefurinn Ísland.is er rekinn af Fjármála- og efnahagsráðuneytinu (kt. 550169-2829), Arnarhvoli við Lindargötu, 101 Reykjavík. Við notkun á þessari vefsíðu verða til ópersónugreinanlegar upp­lýs­ingar um heim­sóknina. Ísland.is notar þessar upp­lýs­ingar til að betr­um­bæta vefsíðuna og til að auka upp­lifun not­enda.  Við leggjum höfuðáherslu á varðveislu þessara gagna og erum við eigendur þeirra gagna sem safnast og því getum við sagt með vissu að gögnin sem safnast eru ekki seld til þriðja aðila. Fyrirvari á efnisskrifum Þótt leitast sé við að hafa upp­lýs­ingar á vef Ísland.is réttar og í sam­ræmi við nýj­ustu stöðu mála er ekki ávallt hægt að ábyrgjast að svo sé. Þetta á einnig við um til­vís­anir og tengla í efni utan vefsins. Efni Ísland.is er í stöðugri þróun og uppfært eftir bestu getu þegar nýjar upplýsingar berast. Upplýsingar eru fengnar af vefjum þeirra stofnana sem við á hverju sinni og verður efnið fullunnið í samstarfi við þær á komandi mánuðum. Efnið er því birt hér með fyrirvara um að villur kunni að leynast í því fyrst um sinn. Við leggjum áherslu á að vanda til verka en þar sem stofnanir eru margar kann það að taka tíma að tryggja að allar upplýsingar séu réttar og uppfærðar. Notendum er velkomið að hafa samband og senda okkur athugasemdir á island@island.is. Vefgreining Ísland.is notar vefgreiningarforrit frá Plausible til þess að greina notkun á vefsíðu stofnunarinnar. Tilgangur þess er að fá fram tölfræðiupplýsingar sem notaðar eru til að betrumbæta og þróa vefsíðuna og þær upplýsingar sem þar eru birtar. Þessar upplýsingar varpa til dæmis ljósi á það hversu margir notendur opna tilteknar undirsíður á vefsíðunni, hversu lengi þær eru skoðaðar, hvaða efni notendur leita að í leitarvélinni á síðunni, frá hvaða vefsíðum notendur koma inn á síðuna og hvers konar vafra þeir nota til að skoða hana. Plausible byggir á opnum hugbúnaði og tryggir rétta meðferð persónuupplýsinga. Það notast ekki við kökur (e. cookies) og uppfyllir GDPR, CCPA og PECR. Plausible státar sig af því að vera notendavænt greiningartól (e. privacy-friendly) og safnar engum persónugreinanlegum upplýsingum um notendur.   Sú vinnsla persónuupplýsinga sem fram fer í tengslum við vefgreiningu á vefsíðu Ísland.is, sbr. framangreint, styðst við heimild í f-lið 1. mgr. 6. gr. persónuverndarreglugerðar (ESB) 2016/679, sbr. 6. tölul. 9. gr. laga nr. 90/2018, um persónuvernd og vinnslu persónuupplýsinga, en samkvæmt þessum ákvæðum er heimilt að vinna með persónuupplýsingar sé það nauðsynlegt vegna lögmætra hagsmuna sem ábyrgðaraðili eða þriðji maður gætir, nema hagsmunir eða grundvallarréttindi og frelsi hins skráða sem krefjast verndar persónuupplýsinga vegi þyngra. Hinir lögmætu hagsmunir eru hér fólgnir í því að Persónuvernd geti veitt notendum vefsíðunnar betri þjónustu og sinnt fræðslu- og leiðbeiningarhlutverki sínu betur. Skráning notenda á vefnum Var efnið hjálplegt? Á flestum síðum vefsins mun verða hægt að skrá ábendingu um hvað má betur fara á síðunni. Notendur geta gefið upp netfang sitt svo hægt sé leiðbeina þeim eða óska eftir frekari upplýsingum. Þessar skráningar eru geymdar í að hámarki hálft ár í vefumsjónarkerfinu. Skrár yfir þær eru afritaðar reglulega, netföngum eytt og athugasemdirnar geymdar í skjalakerfi (málaskrá). Áskrift að efni vefsins Notendur geta skráð sig í áskrift að efni vefsins. Tilkynningar um nýtt efni eru sjálfkrafa sendar á netföng sem skráð hafa verið fyrir áskrift að efni. Netföngin og áskriftarflokkar eru vistuð í vefumsjónarkerfinu. Þessar upplýsingar eru aðeins notaðar til að senda út tilkynningar um nýtt efni. Neðst í tölvupóstunum sem notendum berst er tengill sem hægt er að smella á til að segja sig úr áskrift. Vefurinn og þær upplýsingar sem hann tekur á móti eru vistaðar á Íslandi hjá fyrirtæki með alþjóðlega öryggisvottun (ISO 27001). Hafa samband – ábending eða fyrirspurn Á vefnum er hægt að hafa samband við Stafrænt Ísland með því að senda tölvupóst í gegnum viðmótið. Ábendingar eða fyrirspurnir eru umsvifalaust send á netfang Stafræns Íslands. Þar er hún skráð í skjalakerfi (málaskrá) og erindinu komið til starfsmanns sem afgreiðir það. Afrit af erindum og svörum ráðuneytisins eru ekki vistuð í vefumsjónarkerfinu. Tenglar í aðra vefi Á vef Ísland.is er stundum vísað á vefi annarra stofnana, félaga­sam­taka og fyr­ir­tækja. Reglur Ísland.is um öryggi not­enda gilda ekki á vefjum utan hans. Ísland.is ber ekki ábyrgð á efn­isinni­haldi eða áreiðanleika slíkra vefja. Vís­unin þýðir heldur ekki að Ísland.is styðji eða aðhyllist nokkuð sem þar kemur fram."
    tokens = "Skilmálar Ísland.is Upplýsingar um persónuvernd og öryggi verða uppfærðar hér samhliða þróun og efnisskrifum á vefnum . Persónuvernd og öryggi Vefurinn Ísland.is er rekinn af Fjármála - og efnahagsráðuneytinu ( kt. 550169-2829 ) , Arnarhvoli við Lindargötu , 101 Reykjavík . Við notkun á þessari vefsíðu verða til ópersónugreinanlegar upplýsingar um heimsóknina . Ísland.is notar þessar upplýsingar til að betrumbæta vefsíðuna og til að auka upplifun notenda . Við leggjum höfuðáherslu á varðveislu þessara gagna og erum við eigendur þeirra gagna sem safnast og því getum við sagt með vissu að gögnin sem safnast eru ekki seld til þriðja aðila . Fyrirvari á efnisskrifum Þótt leitast sé við að hafa upplýsingar á vef Ísland.is réttar og í samræmi við nýjustu stöðu mála er ekki ávallt hægt að ábyrgjast að svo sé . Þetta á einnig við um tilvísanir og tengla í efni utan vefsins . Efni Ísland.is er í stöðugri þróun og uppfært eftir bestu getu þegar nýjar upplýsingar berast . Upplýsingar eru fengnar af vefjum þeirra stofnana sem við á hverju sinni og verður efnið fullunnið í samstarfi við þær á komandi mánuðum . Efnið er því birt hér með fyrirvara um að villur kunni að leynast í því fyrst um sinn . Við leggjum áherslu á að vanda til verka en þar sem stofnanir eru margar kann það að taka tíma að tryggja að allar upplýsingar séu réttar og uppfærðar . Notendum er velkomið að hafa samband og senda okkur athugasemdir á island@island.is . Vefgreining Ísland.is notar vefgreiningarforrit frá Plausible til þess að greina notkun á vefsíðu stofnunarinnar . Tilgangur þess er að fá fram tölfræðiupplýsingar sem notaðar eru til að betrumbæta og þróa vefsíðuna og þær upplýsingar sem þar eru birtar . Þessar upplýsingar varpa til dæmis ljósi á það hversu margir notendur opna tilteknar undirsíður á vefsíðunni , hversu lengi þær eru skoðaðar , hvaða efni notendur leita að í leitarvélinni á síðunni , frá hvaða vefsíðum notendur koma inn á síðuna og hvers konar vafra þeir nota til að skoða hana . Plausible byggir á opnum hugbúnaði og tryggir rétta meðferð persónuupplýsinga . Það notast ekki við kökur ( e. cookies ) og uppfyllir GDPR , CCPA og PECR . Plausible státar sig af því að vera notendavænt greiningartól ( e. privacy-friendly ) og safnar engum persónugreinanlegum upplýsingum um notendur . Sú vinnsla persónuupplýsinga sem fram fer í tengslum við vefgreiningu á vefsíðu Ísland.is , sbr. framangreint , styðst við heimild í f-lið 1. mgr. 6. gr. persónuverndarreglugerðar ( ESB ) 2016 / 679 , sbr. 6. tölul. 9. gr. laga nr. 90 / 2018 , um persónuvernd og vinnslu persónuupplýsinga , en samkvæmt þessum ákvæðum er heimilt að vinna með persónuupplýsingar sé það nauðsynlegt vegna lögmætra hagsmuna sem ábyrgðaraðili eða þriðji maður gætir , nema hagsmunir eða grundvallarréttindi og frelsi hins skráða sem krefjast verndar persónuupplýsinga vegi þyngra . Hinir lögmætu hagsmunir eru hér fólgnir í því að Persónuvernd geti veitt notendum vefsíðunnar betri þjónustu og sinnt fræðslu - og leiðbeiningarhlutverki sínu betur . Skráning notenda á vefnum Var efnið hjálplegt ? Á flestum síðum vefsins mun verða hægt að skrá ábendingu um hvað má betur fara á síðunni . Notendur geta gefið upp netfang sitt svo hægt sé leiðbeina þeim eða óska eftir frekari upplýsingum . Þessar skráningar eru geymdar í að hámarki hálft ár í vefumsjónarkerfinu . Skrár yfir þær eru afritaðar reglulega , netföngum eytt og athugasemdirnar geymdar í skjalakerfi ( málaskrá ) . Áskrift að efni vefsins Notendur geta skráð sig í áskrift að efni vefsins . Tilkynningar um nýtt efni eru sjálfkrafa sendar á netföng sem skráð hafa verið fyrir áskrift að efni . Netföngin og áskriftarflokkar eru vistuð í vefumsjónarkerfinu . Þessar upplýsingar eru aðeins notaðar til að senda út tilkynningar um nýtt efni . Neðst í tölvupóstunum sem notendum berst er tengill sem hægt er að smella á til að segja sig úr áskrift . Vefurinn og þær upplýsingar sem hann tekur á móti eru vistaðar á Íslandi hjá fyrirtæki með alþjóðlega öryggisvottun ( ISO 27001 ) . Hafa samband – ábending eða fyrirspurn Á vefnum er hægt að hafa samband við Stafrænt Ísland með því að senda tölvupóst í gegnum viðmótið . Ábendingar eða fyrirspurnir eru umsvifalaust send á netfang Stafræns Íslands . Þar er hún skráð í skjalakerfi ( málaskrá ) og erindinu komið til starfsmanns sem afgreiðir það . Afrit af erindum og svörum ráðuneytisins eru ekki vistuð í vefumsjónarkerfinu . Tenglar í aðra vefi Á vef Ísland.is er stundum vísað á vefi annarra stofnana , félagasamtaka og fyrirtækja . Reglur Ísland.is um öryggi notenda gilda ekki á vefjum utan hans . Ísland.is ber ekki ábyrgð á efnisinnihaldi eða áreiðanleika slíkra vefja . Vísunin þýðir heldur ekki að Ísland.is styðji eða aðhyllist nokkuð sem þar kemur fram .".split(" ")
    labels = "O B-Miscellaneous O O O O O O O O O O O O O O O O O O O O O O O B-Organization I-Organization I-Organization I-Organization O O O O O B-Location O B-Location O O B-Location O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O B-Miscellaneous O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O B-Organization O O O B-Organization O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O B-Miscellaneous O O O O O O O O O O O O O O O O O O O O O B-Miscellaneous O B-Miscellaneous O B-Miscellaneous O B-Miscellaneous O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O B-Miscellaneous O O O O O O O O O O O O O O O B-Organization O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O B-Organization O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O B-Location O O O O O O B-Miscellaneous O O O O O O O O O O O O O O O O O B-Organization I-Organization O O O O O O O O O O O O O O O O O B-Organization I-Organization O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O O".split(" ")
    # It should not crash
    tags = IS_NER.parse_ner_tags(sent, tokens, labels)
    assert True
